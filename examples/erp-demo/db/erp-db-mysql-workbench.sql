-- MySQL Script generated by MySQL Workbench
-- Mi 09 Sep 2020 21:20:14 CEST
-- Model: ERP Demo Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema erp-demo
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema erp-demo
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `erp-demo` DEFAULT CHARACTER SET utf8 ;
USE `erp-demo` ;

-- -----------------------------------------------------
-- Table `erp-demo`.`company`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `erp-demo`.`company` (
  `idcompany` INT(11) NOT NULL AUTO_INCREMENT,
  `type` ENUM('customer', 'supplier', 'other') NULL DEFAULT NULL,
  `name` VARCHAR(60) NULL DEFAULT NULL,
  `taxno` VARCHAR(25) NULL DEFAULT NULL,
  `abbreviation` VARCHAR(10) NULL DEFAULT NULL,
  `logofile` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`idcompany`))
ENGINE = InnoDB
AUTO_INCREMENT = 59
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `erp-demo`.`shipper`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `erp-demo`.`shipper` (
  `idshipper` INT(11) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  `weight_kg` DECIMAL(8,3) NULL DEFAULT NULL,
  `price` DECIMAL(8,2) NULL DEFAULT NULL,
  `tax` DECIMAL(5,2) NULL DEFAULT NULL,
  `maximaldist_km` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`idshipper`))
ENGINE = InnoDB
AUTO_INCREMENT = 5
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `erp-demo`.`companyaddress`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `erp-demo`.`companyaddress` (
  `idcompanyaddress` INT(11) NOT NULL AUTO_INCREMENT,
  `idcompany` INT(11) NULL DEFAULT NULL,
  `specificname1` VARCHAR(60) NULL DEFAULT NULL,
  `specificname2` VARCHAR(60) NULL DEFAULT NULL,
  `address1` VARCHAR(45) NULL DEFAULT NULL,
  `address2` VARCHAR(45) NULL DEFAULT NULL,
  `zip` VARCHAR(45) NULL DEFAULT NULL,
  `city` VARCHAR(45) NULL DEFAULT NULL,
  `country` VARCHAR(45) NULL DEFAULT NULL,
  `phonelocation` VARCHAR(45) NULL DEFAULT NULL,
  `maillocation` VARCHAR(45) NULL DEFAULT NULL,
  `faxlocation` VARCHAR(45) NULL DEFAULT NULL,
  `idfavoriteshipper` INT(11) NULL DEFAULT NULL,
  `languagecode` VARCHAR(10) NULL DEFAULT NULL,
  PRIMARY KEY (`idcompanyaddress`),
  INDEX `fk_idcompany_ca_idx` (`idcompany` ASC),
  INDEX `fk_idfavoriteshipper_ca_idx` (`idfavoriteshipper` ASC),
  CONSTRAINT `fk_idcompany_ca`
    FOREIGN KEY (`idcompany`)
    REFERENCES `erp-demo`.`company` (`idcompany`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idfavoriteshipper_ca`
    FOREIGN KEY (`idfavoriteshipper`)
    REFERENCES `erp-demo`.`shipper` (`idshipper`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 59
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `erp-demo`.`companycontact`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `erp-demo`.`companycontact` (
  `idcompanycontact` INT(11) NOT NULL AUTO_INCREMENT,
  `idcompany` INT(11) NULL DEFAULT NULL,
  `idcompanyaddress` INT(11) NULL DEFAULT NULL,
  `title` VARCHAR(45) NULL DEFAULT NULL,
  `firstname` VARCHAR(45) NULL DEFAULT NULL,
  `familiyname` VARCHAR(45) NULL DEFAULT NULL,
  `phone` VARCHAR(45) NULL DEFAULT NULL,
  `fax` VARCHAR(45) NULL DEFAULT NULL,
  `mail` VARCHAR(45) NULL DEFAULT NULL,
  `state` ENUM('used', 'legacy') NULL DEFAULT NULL,
  `name_full` VARCHAR(100) NULL DEFAULT NULL,
  PRIMARY KEY (`idcompanycontact`),
  INDEX `fk_idcompany_cc_idx` (`idcompany` ASC),
  INDEX `fk_idcompanyaddress_cc_idx` (`idcompanyaddress` ASC),
  CONSTRAINT `fk_idcompanyaddress_cc`
    FOREIGN KEY (`idcompanyaddress`)
    REFERENCES `erp-demo`.`companyaddress` (`idcompanyaddress`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idcompany_cc`
    FOREIGN KEY (`idcompany`)
    REFERENCES `erp-demo`.`company` (`idcompany`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 45
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `erp-demo`.`config`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `erp-demo`.`config` (
  `idconfig` INT(11) NOT NULL,
  `dbversion` DECIMAL(4,2) NULL DEFAULT '1.00',
  `default_tax` DECIMAL(5,2) NULL DEFAULT '8.00',
  `docpath_win` VARCHAR(500) NULL DEFAULT NULL,
  `docpath_linux` VARCHAR(500) NULL DEFAULT NULL,
  `docpath_mac` VARCHAR(500) NULL DEFAULT NULL,
  `docpath_custom` VARCHAR(500) NULL DEFAULT NULL,
  PRIMARY KEY (`idconfig`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `erp-demo`.`order`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `erp-demo`.`order` (
  `idorder` INT(11) NOT NULL AUTO_INCREMENT,
  `ordertype` ENUM('internal', 'extorder') NULL DEFAULT NULL,
  `idcustomer` INT(11) NULL DEFAULT NULL,
  `idordercontact` INT(11) NULL DEFAULT NULL,
  `date_order` DATE NULL DEFAULT NULL,
  `date_scheduled` DATE NULL DEFAULT NULL,
  `customer_orderno` VARCHAR(45) NULL DEFAULT NULL,
  `customer_refdoc` VARCHAR(45) NULL DEFAULT NULL,
  `internal_orderno` VARCHAR(45) NULL DEFAULT NULL,
  `default_order_number` VARCHAR(45) NULL DEFAULT NULL,
  `state` ENUM('incoming', 'offer', 'ordered', 'production', 'ready', 'delivered', 'invoiceopen', 'done') NULL DEFAULT NULL,
  `iddeliverycontact` INT(11) NULL DEFAULT NULL,
  `iddeliveryaddress` INT(11) NULL DEFAULT NULL,
  `deliverytype` VARCHAR(45) NULL DEFAULT NULL,
  `idinvoicecontact` INT(11) NULL DEFAULT NULL,
  `idinvoiceaddress` INT(11) NULL DEFAULT NULL,
  `comment_internal` VARCHAR(200) NULL DEFAULT NULL,
  `comment_offer` VARCHAR(200) NULL DEFAULT NULL,
  `comment_delivery` VARCHAR(200) NULL DEFAULT NULL,
  `comment_invoice` VARCHAR(200) NULL DEFAULT NULL,
  `date_offer` DATE NULL DEFAULT NULL,
  `date_planned_prodstart` DATE NULL DEFAULT NULL,
  `date_planned_delivery` DATE NULL DEFAULT NULL,
  `date_delivery` DATE NULL DEFAULT NULL,
  `date_done` DATE NULL DEFAULT NULL,
  `price_calc_sum_notax` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_set_sum_notax` DECIMAL(8,2) NULL DEFAULT NULL,
  PRIMARY KEY (`idorder`),
  INDEX `fk_idcustomer_or_idx` (`idcustomer` ASC),
  INDEX `fk_idordercontact_or_idx` (`idordercontact` ASC),
  INDEX `fk_iddeliverycontact_or_idx` (`iddeliverycontact` ASC),
  INDEX `fk_iddeliveryaddress_or_idx` (`iddeliveryaddress` ASC),
  INDEX `fk_idinvoicecontact_or_idx` (`idinvoicecontact` ASC),
  INDEX `fk_idinvoiceaddress_or_idx` (`idinvoiceaddress` ASC),
  CONSTRAINT `fk_idcustomer_or`
    FOREIGN KEY (`idcustomer`)
    REFERENCES `erp-demo`.`company` (`idcompany`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_iddeliveryaddress_or`
    FOREIGN KEY (`iddeliveryaddress`)
    REFERENCES `erp-demo`.`companyaddress` (`idcompanyaddress`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_iddeliverycontact_or`
    FOREIGN KEY (`iddeliverycontact`)
    REFERENCES `erp-demo`.`companycontact` (`idcompanycontact`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idinvoiceaddress_or`
    FOREIGN KEY (`idinvoiceaddress`)
    REFERENCES `erp-demo`.`companyaddress` (`idcompanyaddress`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idinvoicecontact_or`
    FOREIGN KEY (`idinvoicecontact`)
    REFERENCES `erp-demo`.`companycontact` (`idcompanycontact`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idordercontact_or`
    FOREIGN KEY (`idordercontact`)
    REFERENCES `erp-demo`.`companycontact` (`idcompanycontact`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 712
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `erp-demo`.`conforder`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `erp-demo`.`conforder` (
  `idconforder` INT(11) NOT NULL AUTO_INCREMENT,
  `idconforderaddress` INT(11) NULL DEFAULT NULL,
  `idconfordercontact` INT(11) NULL DEFAULT NULL,
  `idorder` INT(11) NULL DEFAULT NULL,
  `title` VARCHAR(60) NULL DEFAULT NULL,
  `number` VARCHAR(45) NULL DEFAULT NULL,
  `comment` VARCHAR(200) NULL DEFAULT NULL,
  `state` ENUM('idle', 'open', 'done') NULL DEFAULT NULL,
  `price_sum` DECIMAL(8,2) NULL DEFAULT NULL,
  `reduction1` DECIMAL(5,2) NULL DEFAULT NULL,
  `price_reduction1` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_after_red1` DECIMAL(8,2) NULL DEFAULT NULL,
  `reduction2` DECIMAL(5,2) NULL DEFAULT NULL,
  `price_reduction2` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_after_red2` DECIMAL(8,2) NULL DEFAULT NULL,
  `text_delivery` VARCHAR(60) NULL DEFAULT NULL,
  `price_delivery` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_sum_notax` DECIMAL(8,2) NULL DEFAULT NULL,
  `tax` DECIMAL(5,2) NULL DEFAULT NULL,
  `price_tax` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_sum_tax` DECIMAL(8,2) NULL DEFAULT NULL,
  `confordercode` VARCHAR(60) NULL DEFAULT NULL,
  `payment_custom_text` VARCHAR(60) NULL DEFAULT NULL,
  `date_conforder` DATE NULL DEFAULT NULL,
  PRIMARY KEY (`idconforder`),
  INDEX `fk_idconforderaddress_co_1_idx` (`idconforderaddress` ASC),
  INDEX `fk_idconfordercontact_co_1_idx` (`idconfordercontact` ASC),
  INDEX `fk_idorder_co_1_idx` (`idorder` ASC),
  CONSTRAINT `fk_idconforderaddress_co_1`
    FOREIGN KEY (`idconforderaddress`)
    REFERENCES `erp-demo`.`companyaddress` (`idcompanyaddress`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idconfordercontact_co_1`
    FOREIGN KEY (`idconfordercontact`)
    REFERENCES `erp-demo`.`companycontact` (`idcompanycontact`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idorder_co_1`
    FOREIGN KEY (`idorder`)
    REFERENCES `erp-demo`.`order` (`idorder`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 971
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `erp-demo`.`rawmaterial`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `erp-demo`.`rawmaterial` (
  `idrawmaterial` INT(11) NOT NULL AUTO_INCREMENT,
  `material` VARCHAR(50) NULL DEFAULT NULL,
  `dimension` VARCHAR(50) NULL DEFAULT NULL,
  `amount_unit` ENUM('meter', 'piece', 'rod_of_l') NULL DEFAULT NULL,
  `orderlength` DECIMAL(10,3) NULL DEFAULT NULL,
  `orderweight_kg` DECIMAL(7,3) NULL DEFAULT NULL,
  `order_threshold_min` DECIMAL(7,3) NULL DEFAULT NULL,
  `price_per_orderentity` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_per_orderentity_min` DECIMAL(8,2) NULL DEFAULT NULL,
  `description` VARCHAR(60) NULL DEFAULT NULL,
  `density_kgm3` DECIMAL(10,4) NULL DEFAULT NULL,
  `idsupplier` INT(11) NULL DEFAULT NULL,
  `idsupplieraddress` INT(11) NULL DEFAULT NULL,
  `idsuppliercontact` INT(11) NULL DEFAULT NULL,
  `instock` DECIMAL(10,3) NULL DEFAULT NULL,
  `ordered` DECIMAL(10,3) NULL DEFAULT NULL,
  `date_lastordered` DATE NULL DEFAULT NULL,
  `date_lastused` DATE NULL DEFAULT NULL,
  PRIMARY KEY (`idrawmaterial`),
  INDEX `fk_idsupplier_rw_idx` (`idsupplier` ASC),
  INDEX `fk_idsupplieraddress_rw_idx` (`idsupplieraddress` ASC),
  INDEX `fk_idsuppliercontact_rw_idx` (`idsuppliercontact` ASC),
  CONSTRAINT `fk_idsupplieraddress_rw`
    FOREIGN KEY (`idsupplieraddress`)
    REFERENCES `erp-demo`.`companyaddress` (`idcompanyaddress`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idsuppliercontact_rw`
    FOREIGN KEY (`idsuppliercontact`)
    REFERENCES `erp-demo`.`companycontact` (`idcompanycontact`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idsupplier_rw`
    FOREIGN KEY (`idsupplier`)
    REFERENCES `erp-demo`.`company` (`idcompany`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 141
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `erp-demo`.`product`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `erp-demo`.`product` (
  `idproduct` INT(11) NOT NULL AUTO_INCREMENT,
  `idcustomer` INT(11) NULL DEFAULT NULL,
  `name` VARCHAR(100) NULL DEFAULT NULL,
  `supplier_prodno` VARCHAR(45) NULL DEFAULT NULL,
  `supplier_drawno` VARCHAR(45) NULL DEFAULT NULL,
  `idreplaced_by` INT(11) NULL DEFAULT NULL,
  `replaced_by_date` DATE NULL DEFAULT NULL,
  `type` ENUM('purchase', 'produce', 'other') NULL DEFAULT NULL,
  `amount_unit` VARCHAR(10) NULL DEFAULT NULL,
  `idparentproduct` INT(11) NULL DEFAULT NULL,
  `idsupplieraddress` INT(11) NULL DEFAULT NULL,
  `supplier_price` DECIMAL(8,2) NULL DEFAULT NULL,
  `time_setup_min` DECIMAL(6,2) NULL DEFAULT NULL,
  `time_prodperpart_min` DECIMAL(6,2) NULL DEFAULT NULL,
  `length_rawmaterial_beforesawn_mm` DECIMAL(8,3) NULL DEFAULT NULL,
  `idrawmaterial` INT(11) NULL DEFAULT NULL,
  `length_rawmaterial_mm` DECIMAL(8,3) NULL DEFAULT NULL,
  `price_rawmaterial` DECIMAL(8,2) NULL DEFAULT NULL,
  `idproduction` INT(11) NULL DEFAULT NULL,
  `external_costs_sum` DECIMAL(8,2) NULL DEFAULT NULL,
  `external_time_sum_d` DECIMAL(6,2) NULL DEFAULT NULL,
  `parts_instock` DECIMAL(6,0) NULL DEFAULT NULL,
  `parts_inorder` DECIMAL(6,0) NULL DEFAULT NULL,
  `price_set_per_piece` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_set_initial` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_calc_per_piece` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_calc_initial` DECIMAL(8,2) NULL DEFAULT NULL,
  `weight_kg` DECIMAL(8,3) NULL DEFAULT NULL,
  `dimension_lwh_mm` VARCHAR(20) NULL DEFAULT NULL,
  `comment_order` VARCHAR(200) NULL DEFAULT NULL,
  `comment_production` VARCHAR(200) NULL DEFAULT NULL,
  `comment_external` VARCHAR(200) NULL DEFAULT NULL,
  `idcopied_from` INT(11) NULL DEFAULT NULL,
  `date_lastproduced` DATE NULL DEFAULT NULL,
  `date_created` DATE NULL DEFAULT NULL,
  `date_changed` DATE NULL DEFAULT NULL,
  PRIMARY KEY (`idproduct`),
  INDEX `fk_idcustomer_pd_idx` (`idcustomer` ASC),
  INDEX `fk_idsupplieraddress_pd_idx` (`idsupplieraddress` ASC),
  INDEX `fk_idrawmaterial_pd_idx` (`idrawmaterial` ASC),
  INDEX `fk_idcopied_from_pd_idx` (`idcopied_from` ASC),
  CONSTRAINT `fk_idcopied_from_pd`
    FOREIGN KEY (`idcopied_from`)
    REFERENCES `erp-demo`.`product` (`idproduct`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idcustomer_pd`
    FOREIGN KEY (`idcustomer`)
    REFERENCES `erp-demo`.`company` (`idcompany`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idrawmaterial_pd`
    FOREIGN KEY (`idrawmaterial`)
    REFERENCES `erp-demo`.`rawmaterial` (`idrawmaterial`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idsupplieraddress_pd`
    FOREIGN KEY (`idsupplieraddress`)
    REFERENCES `erp-demo`.`companyaddress` (`idcompanyaddress`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 708
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `erp-demo`.`orderdetail`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `erp-demo`.`orderdetail` (
  `idorderdetail` INT(11) NOT NULL AUTO_INCREMENT,
  `idorder` INT(11) NULL DEFAULT NULL,
  `idproduct` INT(11) NULL DEFAULT NULL,
  `idrawmaterial` INT(11) NULL DEFAULT NULL,
  `name` VARCHAR(100) NULL DEFAULT NULL,
  `supplier_prodno` VARCHAR(45) NULL DEFAULT NULL,
  `supplier_drawno` VARCHAR(45) NULL DEFAULT NULL,
  `amount` DECIMAL(8,2) NULL DEFAULT NULL,
  `amount_unit` VARCHAR(10) NULL DEFAULT NULL,
  `amount_from_stock` DECIMAL(8,2) NULL DEFAULT NULL,
  `tax` DECIMAL(5,2) NULL DEFAULT NULL,
  `comment_offer` VARCHAR(200) NULL DEFAULT NULL,
  `comment_production` VARCHAR(200) NULL DEFAULT NULL,
  `comment_invoice` VARCHAR(200) NULL DEFAULT NULL,
  `comment_external` VARCHAR(200) NULL DEFAULT NULL,
  `comment_delivery` VARCHAR(200) NULL DEFAULT NULL,
  `length_rawmaterial_beforesawn_mm` DECIMAL(8,3) NULL DEFAULT NULL,
  `length_rawmaterial_order_mm` DECIMAL(8,3) NULL DEFAULT NULL,
  `price_internal` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_externalop` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_reduction_perc` DECIMAL(5,2) NULL DEFAULT NULL,
  `price_reduction_abs` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_customer` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_currencystr` VARCHAR(10) NULL DEFAULT NULL,
  `price_initial_notax` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_per_piece_notax` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_average_per_piece` DECIMAL(8,2) NULL DEFAULT NULL,
  `time_production_min` DECIMAL(6,2) NULL DEFAULT NULL,
  `units_fromstock` DECIMAL(5,0) NULL DEFAULT NULL,
  `units_toproduce` DECIMAL(5,0) NULL DEFAULT NULL,
  `state` ENUM('incoming', 'offer', 'ordered', 'wait', 'production', 'external', 'ready', 'delivered', 'invoiceopen', 'done') NULL DEFAULT NULL,
  `date_scheduled` DATE NULL DEFAULT NULL,
  `date_plannedstart` DATE NULL DEFAULT NULL,
  `date_expectedready` DATE NULL DEFAULT NULL,
  `orderposition` INT(11) NULL DEFAULT NULL,
  `ordersubposition` INT(11) NULL DEFAULT NULL,
  `rawmatorder_state` INT(11) NULL DEFAULT NULL,
  `date_rawmatorder` DATE NULL DEFAULT NULL,
  PRIMARY KEY (`idorderdetail`),
  INDEX `fk_idorder_od_idx` (`idorder` ASC),
  INDEX `fk_idproduct_od_idx` (`idproduct` ASC),
  INDEX `fk_idrawmaterial_od_idx` (`idrawmaterial` ASC),
  CONSTRAINT `fk_idorder_od`
    FOREIGN KEY (`idorder`)
    REFERENCES `erp-demo`.`order` (`idorder`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idproduct_od`
    FOREIGN KEY (`idproduct`)
    REFERENCES `erp-demo`.`product` (`idproduct`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idrawmaterial_od`
    FOREIGN KEY (`idrawmaterial`)
    REFERENCES `erp-demo`.`rawmaterial` (`idrawmaterial`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1486
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `erp-demo`.`conforderdetail`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `erp-demo`.`conforderdetail` (
  `idconforderdetail` INT(11) NOT NULL AUTO_INCREMENT,
  `idorderdetail` INT(11) NULL DEFAULT NULL,
  `idconforder` INT(11) NULL DEFAULT NULL,
  `amount` DECIMAL(8,2) NULL DEFAULT NULL,
  `amount_unit` VARCHAR(16) NULL DEFAULT NULL,
  `name` VARCHAR(100) NULL DEFAULT NULL,
  `supplier_prodno` VARCHAR(45) NULL DEFAULT NULL,
  `supplier_drawno` VARCHAR(45) NULL DEFAULT NULL,
  `comment` VARCHAR(200) NULL DEFAULT NULL,
  `orderposition` INT(11) NULL DEFAULT NULL,
  `ordersubposition` INT(11) NULL DEFAULT NULL,
  `price_per_piece_notax` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_initial_notax` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_set_per_piece_notax` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_sum_notax` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_average_per_piece` DECIMAL(8,2) NULL DEFAULT NULL,
  `tax` DECIMAL(5,2) NULL DEFAULT NULL,
  `date_scheduled` DATE NULL DEFAULT NULL,
  PRIMARY KEY (`idconforderdetail`),
  INDEX `fk_idorderdetail_cod_idx` (`idorderdetail` ASC),
  INDEX `fk_idconforder_cod_idx` (`idconforder` ASC),
  CONSTRAINT `fk_idconforder_cod`
    FOREIGN KEY (`idconforder`)
    REFERENCES `erp-demo`.`conforder` (`idconforder`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idorderdetail_cod`
    FOREIGN KEY (`idorderdetail`)
    REFERENCES `erp-demo`.`orderdetail` (`idorderdetail`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1929
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `erp-demo`.`delivery`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `erp-demo`.`delivery` (
  `iddelivery` INT(11) NOT NULL AUTO_INCREMENT,
  `idorder` INT(11) NULL DEFAULT NULL,
  `number` VARCHAR(45) NULL DEFAULT NULL,
  `date` DATE NULL DEFAULT NULL,
  `idshipper` INT(11) NULL DEFAULT NULL,
  `comment` VARCHAR(200) NULL DEFAULT NULL,
  `iddeliveryaddress` INT(11) NULL DEFAULT NULL,
  `iddeliverycontact` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`iddelivery`),
  INDEX `fk_idorder_dy_idx` (`idorder` ASC),
  INDEX `fk_idshipper_dy_idx` (`idshipper` ASC),
  CONSTRAINT `fk_idorder_dy`
    FOREIGN KEY (`idorder`)
    REFERENCES `erp-demo`.`order` (`idorder`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idshipper_dy`
    FOREIGN KEY (`idshipper`)
    REFERENCES `erp-demo`.`shipper` (`idshipper`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 769
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `erp-demo`.`deliverydetail`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `erp-demo`.`deliverydetail` (
  `iddeliverydetail` INT(11) NOT NULL AUTO_INCREMENT,
  `idorderdetail` INT(11) NULL DEFAULT NULL,
  `iddelivery` INT(11) NULL DEFAULT NULL,
  `amount` DECIMAL(8,2) NULL DEFAULT NULL,
  `amount_unit` VARCHAR(16) NULL DEFAULT NULL,
  `name` VARCHAR(100) NULL DEFAULT NULL,
  `supplier_prodno` VARCHAR(45) NULL DEFAULT NULL,
  `supplier_drawno` VARCHAR(45) NULL DEFAULT NULL,
  `comment` VARCHAR(45) NULL DEFAULT NULL,
  `orderposition` INT(11) NULL DEFAULT NULL,
  `ordersubposition` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`iddeliverydetail`),
  INDEX `fk_idorderdetail_dd_idx` (`idorderdetail` ASC),
  INDEX `fk_iddelivery_dd_idx` (`iddelivery` ASC),
  CONSTRAINT `fk_iddelivery_dd`
    FOREIGN KEY (`iddelivery`)
    REFERENCES `erp-demo`.`delivery` (`iddelivery`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idorderdetail_dd`
    FOREIGN KEY (`idorderdetail`)
    REFERENCES `erp-demo`.`orderdetail` (`idorderdetail`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1647
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `erp-demo`.`extorder`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `erp-demo`.`extorder` (
  `idextorder` INT(11) NOT NULL AUTO_INCREMENT,
  `idsupplier` INT(11) NULL DEFAULT NULL,
  `idsupplieraddress` INT(11) NULL DEFAULT NULL,
  `idsuppliercontact` INT(11) NULL DEFAULT NULL,
  `comment1` VARCHAR(150) NULL DEFAULT NULL,
  `comment2` VARCHAR(150) NULL DEFAULT NULL,
  `comment3` VARCHAR(150) NULL DEFAULT NULL,
  `state` ENUM('idle', 'waiting', 'done') NULL DEFAULT NULL,
  `price_sum_expected` DECIMAL(8,2) NULL DEFAULT NULL,
  `date_order` DATE NULL DEFAULT NULL,
  `date_expectedback` DATE NULL DEFAULT NULL,
  `date_delivered` DATE NULL DEFAULT NULL,
  PRIMARY KEY (`idextorder`),
  INDEX `fk_idsupplier_eo_idx` (`idsupplier` ASC),
  INDEX `fk_idsupplieraddress_eo_idx` (`idsupplieraddress` ASC),
  INDEX `fk_idsuppliercontact_eo_idx` (`idsuppliercontact` ASC),
  CONSTRAINT `fk_idsupplieraddress_eo`
    FOREIGN KEY (`idsupplieraddress`)
    REFERENCES `erp-demo`.`companyaddress` (`idcompanyaddress`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idsuppliercontact_eo`
    FOREIGN KEY (`idsuppliercontact`)
    REFERENCES `erp-demo`.`companycontact` (`idcompanycontact`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idsupplier_eo`
    FOREIGN KEY (`idsupplier`)
    REFERENCES `erp-demo`.`company` (`idcompany`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `erp-demo`.`invoice`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `erp-demo`.`invoice` (
  `idinvoice` INT(11) NOT NULL AUTO_INCREMENT,
  `idinvoiceaddress` INT(11) NULL DEFAULT NULL,
  `idinvoicecontact` INT(11) NULL DEFAULT NULL,
  `idorder` INT(11) NULL DEFAULT NULL,
  `iddelivery` INT(11) NULL DEFAULT NULL,
  `number` VARCHAR(45) NULL DEFAULT NULL,
  `delivery_number` VARCHAR(100) NULL DEFAULT NULL,
  `comment` VARCHAR(200) NULL DEFAULT NULL,
  `state` ENUM('idle', 'open', 'done') NULL DEFAULT NULL,
  `date_invoice` DATE NULL DEFAULT NULL,
  `price_sum` DECIMAL(8,2) NULL DEFAULT NULL,
  `reduction1` DECIMAL(5,2) NULL DEFAULT NULL,
  `price_reduction1` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_after_red1` DECIMAL(8,2) NULL DEFAULT NULL,
  `reduction2` DECIMAL(5,2) NULL DEFAULT NULL,
  `price_reduction2` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_after_red2` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_delivery` DECIMAL(8,2) NULL DEFAULT NULL,
  `text_delivery` VARCHAR(60) NULL DEFAULT NULL,
  `price_sum_notax` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_tax` DECIMAL(8,2) NULL DEFAULT NULL,
  `tax` DECIMAL(5,2) NULL DEFAULT NULL,
  `part_payment` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_sum_tax` DECIMAL(8,2) NULL DEFAULT NULL,
  `invoicecode` VARCHAR(60) NULL DEFAULT NULL,
  `payment_custom_text` VARCHAR(60) NULL DEFAULT NULL,
  PRIMARY KEY (`idinvoice`),
  INDEX `fk_idorder_in_idx` (`idorder` ASC),
  INDEX `fk_iddelivery_in_idx` (`iddelivery` ASC),
  CONSTRAINT `fk_iddelivery_in`
    FOREIGN KEY (`iddelivery`)
    REFERENCES `erp-demo`.`delivery` (`iddelivery`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idorder_in`
    FOREIGN KEY (`idorder`)
    REFERENCES `erp-demo`.`order` (`idorder`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 757
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `erp-demo`.`matorder`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `erp-demo`.`matorder` (
  `idmatorder` INT(11) NOT NULL AUTO_INCREMENT,
  `idsupplier` INT(11) NULL DEFAULT NULL,
  `idsupplieraddress` INT(11) NULL DEFAULT NULL,
  `idsuppliercontact` INT(11) NULL DEFAULT NULL,
  `comment1` VARCHAR(100) NULL DEFAULT NULL,
  `comment2` VARCHAR(100) NULL DEFAULT NULL,
  `state` ENUM('idle', 'waiting', 'done') NULL DEFAULT NULL,
  `price_sum_expected` DECIMAL(8,2) NULL DEFAULT NULL,
  `date_order` DATE NULL DEFAULT NULL,
  `date_expectedback` DATE NULL DEFAULT NULL,
  `date_delivered` DATE NULL DEFAULT NULL,
  PRIMARY KEY (`idmatorder`),
  INDEX `fk_idsupplier_mo_idx` (`idsupplier` ASC),
  INDEX `fk_idsupplieraddress_mo_idx` (`idsupplieraddress` ASC),
  INDEX `fk_idsuppliercontact_mo_idx` (`idsuppliercontact` ASC),
  CONSTRAINT `fk_idsupplieraddress_mo`
    FOREIGN KEY (`idsupplieraddress`)
    REFERENCES `erp-demo`.`companyaddress` (`idcompanyaddress`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idsuppliercontact_mo`
    FOREIGN KEY (`idsuppliercontact`)
    REFERENCES `erp-demo`.`companycontact` (`idcompanycontact`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idsupplier_mo`
    FOREIGN KEY (`idsupplier`)
    REFERENCES `erp-demo`.`company` (`idcompany`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 47
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `erp-demo`.`orderdetailop`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `erp-demo`.`orderdetailop` (
  `idorderdetailop` INT(11) NOT NULL AUTO_INCREMENT,
  `idorder` INT(11) NULL DEFAULT NULL,
  `idorderdetail` INT(11) NULL DEFAULT NULL,
  `idproduct` INT(11) NULL DEFAULT NULL,
  `idprodoperation` INT(11) NULL DEFAULT NULL,
  `operationindex` INT(11) NULL DEFAULT NULL,
  `state` ENUM('idle', 'production', 'extprepared', 'extpending', 'extback', 'done') NULL DEFAULT NULL,
  `date_plannedstart` DATE NULL DEFAULT NULL,
  `date_prepared` DATE NULL DEFAULT NULL,
  `date_extsent` DATE NULL DEFAULT NULL,
  `date_expectedback` DATE NULL DEFAULT NULL,
  `date_extback` DATE NULL DEFAULT NULL,
  `date_done` DATE NULL DEFAULT NULL,
  `name` VARCHAR(60) NULL DEFAULT NULL,
  `type` ENUM('internal', 'external') NULL DEFAULT NULL,
  `planningdata` VARCHAR(50) NULL DEFAULT NULL,
  `amount` DECIMAL(8,2) NULL DEFAULT NULL,
  PRIMARY KEY (`idorderdetailop`),
  INDEX `fk_idorder_1_idx` (`idorder` ASC),
  INDEX `fk_idproduct_1_idx` (`idproduct` ASC),
  INDEX `fk_idprodoperation_1_idx` (`idprodoperation` ASC),
  INDEX `fk_idorderdetail_1_idx` (`idorderdetail` ASC),
  CONSTRAINT `fk_idorderdetail_1`
    FOREIGN KEY (`idorderdetail`)
    REFERENCES `erp-demo`.`orderdetail` (`idorderdetail`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idorder_1`
    FOREIGN KEY (`idorder`)
    REFERENCES `erp-demo`.`order` (`idorder`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idproduct_1`
    FOREIGN KEY (`idproduct`)
    REFERENCES `erp-demo`.`product` (`idproduct`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1122
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `erp-demo`.`prodoperation`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `erp-demo`.`prodoperation` (
  `idprodoperation` INT(11) NOT NULL AUTO_INCREMENT,
  `idproduct` INT(11) NULL DEFAULT NULL,
  `type` ENUM('internal', 'external') NULL DEFAULT NULL,
  `idsupplier` INT(11) NULL DEFAULT NULL,
  `idsupplieraddress` INT(11) NULL DEFAULT NULL,
  `idsuppliercontact` INT(11) NULL DEFAULT NULL,
  `operationindex` INT(11) NULL DEFAULT NULL,
  `name` VARCHAR(60) NULL DEFAULT NULL,
  `description1` VARCHAR(100) NULL DEFAULT NULL,
  `description2` VARCHAR(100) NULL DEFAULT NULL,
  `idshipper` INT(11) NULL DEFAULT NULL,
  `price_shipper_delivery` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_shipper_per_piece` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_initial` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_per_piece` DECIMAL(8,2) NULL DEFAULT NULL,
  `returntime_d` DECIMAL(6,2) NULL DEFAULT NULL,
  `time_setup_min` DECIMAL(6,2) NULL DEFAULT NULL,
  `time_per_piece_min` DECIMAL(6,2) NULL DEFAULT NULL,
  `parallelworkdelay_min` DECIMAL(6,2) NULL DEFAULT NULL,
  PRIMARY KEY (`idprodoperation`),
  INDEX `fk_idextcompanyaddress_po_idx` (`idsupplieraddress` ASC),
  INDEX `fk_idshipper_po_idx` (`idshipper` ASC),
  INDEX `fk_idextcompanycontact_po_idx` (`idsuppliercontact` ASC),
  INDEX `fk_idproduct_po_idx` (`idproduct` ASC),
  INDEX `fk_idsupplier_po_idx` (`idsupplier` ASC),
  CONSTRAINT `fk_idextcompanyaddress_po`
    FOREIGN KEY (`idsupplieraddress`)
    REFERENCES `erp-demo`.`companyaddress` (`idcompanyaddress`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idextcompanycontact_po`
    FOREIGN KEY (`idsuppliercontact`)
    REFERENCES `erp-demo`.`companycontact` (`idcompanycontact`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idproduct_po`
    FOREIGN KEY (`idproduct`)
    REFERENCES `erp-demo`.`product` (`idproduct`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idshipper_po`
    FOREIGN KEY (`idshipper`)
    REFERENCES `erp-demo`.`shipper` (`idshipper`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idsupplier_po`
    FOREIGN KEY (`idsupplier`)
    REFERENCES `erp-demo`.`company` (`idcompany`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 347
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `erp-demo`.`document`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `erp-demo`.`document` (
  `iddocument` INT(11) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(100) NULL DEFAULT NULL,
  `type` ENUM('doc', 'drawing', 'manual', 'cnc', 'deliverydoc', 'invoice', 'extorder', 'other') NULL DEFAULT NULL,
  `version` VARCHAR(16) NULL DEFAULT NULL,
  `date` DATE NULL DEFAULT NULL,
  `filename` VARCHAR(100) NULL DEFAULT NULL,
  `location` VARCHAR(200) NULL DEFAULT NULL,
  `idreplaced_by` INT(11) NULL DEFAULT NULL,
  `replaced_by_date` DATE NULL DEFAULT NULL,
  `comment` VARCHAR(100) NULL DEFAULT NULL,
  `plaintext` VARCHAR(500) NULL DEFAULT NULL,
  `orderindex` INT(11) NULL DEFAULT NULL,
  `idfollowingdoc` INT(11) NULL DEFAULT NULL,
  `idorder` INT(11) NULL DEFAULT NULL,
  `iddelivery` INT(11) NULL DEFAULT NULL,
  `idinvoice` INT(11) NULL DEFAULT NULL,
  `idproduct` INT(11) NULL DEFAULT NULL,
  `idprodoperation` INT(11) NULL DEFAULT NULL,
  `idrawmaterial` INT(11) NULL DEFAULT NULL,
  `idorderdetailop` INT(11) NULL DEFAULT NULL,
  `idmatorder` INT(11) NULL DEFAULT NULL,
  `idextorder` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`iddocument`),
  INDEX `fk_idorder_dm_idx` (`idorder` ASC),
  INDEX `fk_iddelivery_dm_idx` (`iddelivery` ASC),
  INDEX `fk_idinvoice_dm_idx` (`idinvoice` ASC),
  INDEX `fk_idproduct_dm_idx` (`idproduct` ASC),
  INDEX `fk_idprodoperation_dm_idx` (`idprodoperation` ASC),
  INDEX `fk_idrawmaterial_dm_idx` (`idrawmaterial` ASC),
  INDEX `fk_idorderdetailop_dm_idx` (`idorderdetailop` ASC),
  INDEX `fk_idmatorder_dm_idx` (`idmatorder` ASC),
  INDEX `fk_idextorder_dm_idx` (`idextorder` ASC),
  CONSTRAINT `fk_iddelivery_dm`
    FOREIGN KEY (`iddelivery`)
    REFERENCES `erp-demo`.`delivery` (`iddelivery`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idextorder_dm`
    FOREIGN KEY (`idextorder`)
    REFERENCES `erp-demo`.`extorder` (`idextorder`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idinvoice_dm`
    FOREIGN KEY (`idinvoice`)
    REFERENCES `erp-demo`.`invoice` (`idinvoice`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idmatorder_dm`
    FOREIGN KEY (`idmatorder`)
    REFERENCES `erp-demo`.`matorder` (`idmatorder`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idorderdetailop_dm`
    FOREIGN KEY (`idorderdetailop`)
    REFERENCES `erp-demo`.`orderdetailop` (`idorderdetailop`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idorder_dm`
    FOREIGN KEY (`idorder`)
    REFERENCES `erp-demo`.`order` (`idorder`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idprodoperation_dm`
    FOREIGN KEY (`idprodoperation`)
    REFERENCES `erp-demo`.`prodoperation` (`idprodoperation`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idproduct_dm`
    FOREIGN KEY (`idproduct`)
    REFERENCES `erp-demo`.`product` (`idproduct`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idrawmaterial_dm`
    FOREIGN KEY (`idrawmaterial`)
    REFERENCES `erp-demo`.`rawmaterial` (`idrawmaterial`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `erp-demo`.`extorderdetail`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `erp-demo`.`extorderdetail` (
  `idmatorderdetail` INT(11) NOT NULL AUTO_INCREMENT,
  `idcustomer` INT(11) NULL DEFAULT NULL,
  `idorder` INT(11) NULL DEFAULT NULL,
  `idorderdetail` INT(11) NULL DEFAULT NULL,
  `idprodoperation` INT(11) NULL DEFAULT NULL,
  `date_delivery` DATE NULL DEFAULT NULL,
  `reference_name` VARCHAR(50) NULL DEFAULT NULL,
  `amount` DECIMAL(8,2) NULL DEFAULT NULL,
  `amount_unit` VARCHAR(16) NULL DEFAULT NULL,
  `comment_external` VARCHAR(70) NULL DEFAULT NULL,
  `position` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`idmatorderdetail`),
  INDEX `fk_idcustomer_ed_1_idx` (`idcustomer` ASC),
  INDEX `fk_iforder_ed_1_idx` (`idorder` ASC),
  INDEX `fk_idorderdetail_ed_1_idx` (`idorderdetail` ASC),
  INDEX `fk_idprodoperation_ed_1_idx` (`idprodoperation` ASC),
  CONSTRAINT `fk_idcustomer_ed_1`
    FOREIGN KEY (`idcustomer`)
    REFERENCES `erp-demo`.`company` (`idcompany`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idorderdetail_ed_1`
    FOREIGN KEY (`idorderdetail`)
    REFERENCES `erp-demo`.`orderdetail` (`idorderdetail`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idprodoperation_ed_1`
    FOREIGN KEY (`idprodoperation`)
    REFERENCES `erp-demo`.`prodoperation` (`idprodoperation`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_iforder_ed_1`
    FOREIGN KEY (`idorder`)
    REFERENCES `erp-demo`.`order` (`idorder`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `erp-demo`.`invoicedetail`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `erp-demo`.`invoicedetail` (
  `idinvoicedetail` INT(11) NOT NULL AUTO_INCREMENT,
  `idorderdetail` INT(11) NULL DEFAULT NULL,
  `idinvoice` INT(11) NULL DEFAULT NULL,
  `amount` DECIMAL(8,2) NULL DEFAULT NULL,
  `amount_unit` VARCHAR(16) NULL DEFAULT NULL,
  `name` VARCHAR(100) NULL DEFAULT NULL,
  `supplier_prodno` VARCHAR(45) NULL DEFAULT NULL,
  `supplier_drawno` VARCHAR(45) NULL DEFAULT NULL,
  `comment` VARCHAR(200) NULL DEFAULT NULL,
  `orderposition` INT(11) NULL DEFAULT NULL,
  `ordersubposition` INT(11) NULL DEFAULT NULL,
  `price_per_piece_notax` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_initial_notax` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_set_per_piece_notax` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_sum_notax` DECIMAL(8,2) NULL DEFAULT NULL,
  `price_average_per_piece` DECIMAL(8,2) NULL DEFAULT NULL,
  `tax` DECIMAL(5,2) NULL DEFAULT NULL,
  PRIMARY KEY (`idinvoicedetail`),
  INDEX `fk_idorderdetail_id_idx` (`idorderdetail` ASC),
  INDEX `fk_idinvoice_id_idx` (`idinvoice` ASC),
  CONSTRAINT `fk_idinvoice_id`
    FOREIGN KEY (`idinvoice`)
    REFERENCES `erp-demo`.`invoice` (`idinvoice`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idorderdetail_id`
    FOREIGN KEY (`idorderdetail`)
    REFERENCES `erp-demo`.`orderdetail` (`idorderdetail`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1646
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `erp-demo`.`matorderdetail`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `erp-demo`.`matorderdetail` (
  `idmatorderdetail` INT(11) NOT NULL AUTO_INCREMENT,
  `idmatorder` INT(11) NULL DEFAULT NULL,
  `idcustomer` INT(11) NULL DEFAULT NULL,
  `idorderdetail` INT(11) NULL DEFAULT NULL,
  `idrawmaterial` INT(11) NULL DEFAULT NULL,
  `instock` DECIMAL(10,3) NULL DEFAULT NULL,
  `amount` DECIMAL(10,3) NULL DEFAULT NULL,
  `amount_unit` VARCHAR(16) NULL DEFAULT NULL,
  `date_delivery` DATE NULL DEFAULT NULL,
  `reference_name` VARCHAR(50) NULL DEFAULT NULL,
  `position` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`idmatorderdetail`),
  INDEX `fk_idcustomer_mod_1_idx` (`idcustomer` ASC),
  INDEX `fk_idmatorder_mod_1_idx` (`idmatorder` ASC),
  INDEX `fk_idorderdetail_mod_1_idx` (`idorderdetail` ASC),
  INDEX `fk_idrawmaterial_mod_1_idx` (`idrawmaterial` ASC),
  CONSTRAINT `fk_idcustomer_mod_1`
    FOREIGN KEY (`idcustomer`)
    REFERENCES `erp-demo`.`company` (`idcompany`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idmatorder_mod_1`
    FOREIGN KEY (`idmatorder`)
    REFERENCES `erp-demo`.`matorder` (`idmatorder`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idorderdetail_mod_1`
    FOREIGN KEY (`idorderdetail`)
    REFERENCES `erp-demo`.`orderdetail` (`idorderdetail`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idrawmaterial_mod_1`
    FOREIGN KEY (`idrawmaterial`)
    REFERENCES `erp-demo`.`rawmaterial` (`idrawmaterial`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 68
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `erp-demo`.`stockparts`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `erp-demo`.`stockparts` (
  `idstockparts` INT(11) NOT NULL AUTO_INCREMENT,
  `idproduct` INT(11) NULL DEFAULT NULL,
  `amount` DECIMAL(10,3) NULL DEFAULT NULL,
  PRIMARY KEY (`idstockparts`),
  INDEX `fk_idproduct_sp_idx` (`idproduct` ASC),
  CONSTRAINT `fk_idproduct_sp`
    FOREIGN KEY (`idproduct`)
    REFERENCES `erp-demo`.`company` (`idcompany`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `erp-demo`.`users`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `erp-demo`.`users` (
  `iduser` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `username` VARCHAR(50) NOT NULL,
  `firstname` VARCHAR(100) NULL DEFAULT NULL,
  `lastname` VARCHAR(100) NULL,
  `credential_hash` VARCHAR(200) NULL DEFAULT NULL,
  `authentication_level` INT NOT NULL,
  `state` ENUM('active', 'inactive') NOT NULL,
  PRIMARY KEY (`iduser`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `erp-demo`.`various`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `erp-demo`.`various` (
  `idvarious` INT(11) NOT NULL,
  `nextorder_number` INT(11) NULL DEFAULT NULL,
  `nextdoc_number` INT(11) NULL DEFAULT NULL,
  `nextextorder_number` INT(11) NULL DEFAULT NULL,
  `nextprod_number` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`idvarious`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
